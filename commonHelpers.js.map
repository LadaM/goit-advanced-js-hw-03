{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from \"axios\";\n\naxios.defaults.headers.common[\"x-api-key\"] = \"live_d6fCYBCjgVcrNcLCehO9h7vFE7XVmctgwsbaz8xbHaRGxDCAZX22e9BPeFKyzc7R\";\n\nexport const fetchBreeds = () => {\n    return axios\n        .get(`https://api.thecatapi.com/v1/breeds`)\n        .then(response => response.data);\n}\n\nexport const fetchCatByBreed = (breedId) => {\n    return axios\n        .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n        .then(response => response.data);\n}","'use strict';\n\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api';\nimport SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// import 'slim-select/dist/slimselect.css'; // this line is failing though the path is correct and can be found in node_modules\nconst selector = document.querySelector('#cat-breed-selector');\nconst loading = document.querySelector('.loader');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  fetchBreeds()\n    .then(breeds => {\n      const options = breeds.map(breed => ({\n        text: breed.name,\n        value: breed.id,\n      }));\n\n      new SlimSelect({\n        select: '#cat-breed-selector',\n        data: [\n          { text: 'Select a cat breed', value: '', placeholder: true },\n          ...options,\n        ],\n        placeholder: 'Select a cat breed',\n      });\n\n      removeLoader();\n      selector.removeAttribute('hidden');\n      selector.addEventListener('change', event => loadCatBreed(event));\n    })\n    .catch(error => {\n      showError();\n      console.log(error);\n    });\n});\n\nconst loadCatBreed = event => {\n  const selectedBreedId = event.target.value;\n  const catContainer = document.querySelector('.cat');\n  if (!selectedBreedId) {\n    iziToast.error({\n      title: 'Oops!',\n      message: 'Please select a cat breed.',\n      position: 'topRight',\n    });\n    catContainer.innerHTML = '';\n    return;\n  }\n  console.log(selectedBreedId);\n  selector.setAttribute('disabled', '');\n  loading.style.display = 'block';\n  fetchCatByBreed(selectedBreedId)\n    .then(cats => {\n      const cat = cats[0];\n\n      catContainer.innerHTML = `\n          <div class=\"cat-img\">\n            <img src=\"${cat.url}\" alt=\"${cat.id}\" />\n          </div>\n          <div class=\"cat-info\">\n            <h2>${cat.breeds[0].name}</h2>\n            <p>${cat.breeds[0].description}</p>\n            <p><span class=\"temperament\">Temprement: </span>${cat.breeds[0].temperament}</p>\n        </div>`;\n\n      catContainer.removeAttribute('hidden');\n    })\n    .catch(error => {\n      showError();\n      console.log(error);\n    })\n    .finally(() => {\n      selector.removeAttribute('disabled'); // enabling the cat selection once the HTTP request is done\n      removeLoader();\n    });\n};\n\nconst removeLoader = () => {\n  loading.style.display = 'none';\n};\nfunction showError() {\n  iziToast.error({\n    title: 'Oops!',\n    message: 'Something went wrong. Please try reloading the page.',\n    position: 'topRight',\n  });\n}\n"],"names":["axios","fetchBreeds","response","fetchCatByBreed","breedId","selector","loading","breeds","options","breed","SlimSelect","removeLoader","event","loadCatBreed","error","showError","selectedBreedId","catContainer","iziToast","cats","cat"],"mappings":"owBAIAA,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAI,wEAEtC,MAAMC,EAAc,IAChBD,EACF,IAAI,qCAAqC,EACzC,KAAKE,GAAYA,EAAS,IAAI,EAG1BC,EAAmBC,GACrBJ,EACF,IAAI,wDAAwDI,CAAO,EAAE,EACrE,KAAKF,GAAYA,EAAS,IAAI,ECRjCG,EAAW,SAAS,cAAc,qBAAqB,EACvDC,EAAU,SAAS,cAAc,SAAS,EAEhD,SAAS,iBAAiB,mBAAoB,IAAM,CAClDL,EAAa,EACV,KAAKM,GAAU,CACd,MAAMC,EAAUD,EAAO,IAAIE,IAAU,CACnC,KAAMA,EAAM,KACZ,MAAOA,EAAM,EACd,EAAC,EAEF,IAAIC,EAAW,CACb,OAAQ,sBACR,KAAM,CACJ,CAAE,KAAM,qBAAsB,MAAO,GAAI,YAAa,EAAM,EAC5D,GAAGF,CACJ,EACD,YAAa,oBACrB,CAAO,EAEDG,IACAN,EAAS,gBAAgB,QAAQ,EACjCA,EAAS,iBAAiB,SAAUO,GAASC,EAAaD,CAAK,CAAC,CACtE,CAAK,EACA,MAAME,GAAS,CACdC,IACA,QAAQ,IAAID,CAAK,CACvB,CAAK,CACL,CAAC,EAED,MAAMD,EAAeD,GAAS,CAC5B,MAAMI,EAAkBJ,EAAM,OAAO,MAC/BK,EAAe,SAAS,cAAc,MAAM,EAClD,GAAI,CAACD,EAAiB,CACpBE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACT,SAAU,UAChB,CAAK,EACDD,EAAa,UAAY,GACzB,MACD,CACD,QAAQ,IAAID,CAAe,EAC3BX,EAAS,aAAa,WAAY,EAAE,EACpCC,EAAQ,MAAM,QAAU,QACxBH,EAAgBa,CAAe,EAC5B,KAAKG,GAAQ,CACZ,MAAMC,EAAMD,EAAK,CAAC,EAElBF,EAAa,UAAY;AAAA;AAAA,wBAEPG,EAAI,GAAG,UAAUA,EAAI,EAAE;AAAA;AAAA;AAAA,kBAG7BA,EAAI,OAAO,CAAC,EAAE,IAAI;AAAA,iBACnBA,EAAI,OAAO,CAAC,EAAE,WAAW;AAAA,8DACoBA,EAAI,OAAO,CAAC,EAAE,WAAW;AAAA,gBAGjFH,EAAa,gBAAgB,QAAQ,CAC3C,CAAK,EACA,MAAMH,GAAS,CACdC,IACA,QAAQ,IAAID,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbT,EAAS,gBAAgB,UAAU,EACnCM,GACN,CAAK,CACL,EAEMA,EAAe,IAAM,CACzBL,EAAQ,MAAM,QAAU,MAC1B,EACA,SAASS,GAAY,CACnBG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uDACT,SAAU,UACd,CAAG,CACH"}